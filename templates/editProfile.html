{% extends "base.html" %}

{%  block title %} Edit Profile {% endblock %}

{% block body %}

    <div class="tabbable">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#editProfile" data-toggle="tab">Edit Profile</a></li>
            <li><a href="#preferences" data-toggle="tab">Preferences</a></li>
            <li><a href="#friends" data-toggle="tab">Friends List</a></li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane active" id="editProfile">
                <!-- edit name, username, and email
                     username needs to be checked for availability
                     email needs to be tagged not verified until the user clicks links in email -->
                <br>
                <form>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-12 lead">Edit user profile<hr></div>
                            </div> <!-- row -->
                            <div class="row">
                                <div class="col-md-4 text-center">
                                    <div id="img-preview-block" class="img-circle avatar avatar-original center-block" style="background-size:cover;
                                background-image:url(http://robohash.org/sitsequiquia.png?size=120x120)"></div>
                                    <br>
                                    <span class="btn btn-link btn-file">Edit profile picture<input type="file" id="upload-img"></span>
                                </div>
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <label for="user_last_name">Name</label>
                                        <input type="text" class="form-control" id="user_name" placeholder="Anna Huynh"> <!-- previous info as placeholder -->
                                    </div>
                                    <div class="form-group">
                                        <label for="user_first_name">Username</label>
                                        <input type="text" class="form-control" id="user_username" placeholder="ilovemovies">
                                    </div>
                                    <div class="form-group">
                                        <label for="user_middle_name">Email</label>
                                        <input type="text" class="form-control" id="user_email" placeholder="movies_great@gmail.com                                                  VERIFIED">
                                    </div>
                                    <button class="btn btn-primary" data-toggle="modal" data-target="#changePassword">Change password</button>
                                    <div id="changePassword" class="modal fade" role="dialog">
                                        <div class="modal-dialog" style="width:500px">
                                            <div class="modal-content">
                                                <div class="modal-header" style="padding-left:7%">
                                                    <h2>Change Password<a class="close" data-dismiss="modal">x</a></h2>
                                                </div>
                                                <div class="modal-body" style="padding-left:7%">
                                                    <form>
                                                        <div class="row">
                                                        <div class="col-md-8">
                                                            <div class="form-group">
                                                                <label for="old_password">Old password</label>
                                                                <input type="text" class="form-control" id="user_name" placeholder="" required>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="password">New password</label>
                                                                <input type="password" class="form-control" id="password" placeholder="" required>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="confirm_password">Retype password</label>
                                                                <input type="password" class="form-control" id="confirm_password" placeholder="" required>
                                                            </div>
                                                        </div>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="submit" class="btn btn-primary pull-right"><i class="glyphicon glyphicon-floppy-disk"></i> Save</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> <!-- row -->
                            <div class="row">
                                <div class="col-md-12">
                                    <hr>
                                    <button class="btn btn-primary pull-right"><i class="glyphicon glyphicon-floppy-disk"></i> Save</button>
                                </div>
                            </div> <!-- row -->
                        </div> <!-- panel body -->
                    </div> <!-- panel -->
                </form>

                <!-- past reviews and ratings (for now it can be sorted from newest to oldest) -->
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-12 lead">Recent activity<hr></div>
                        </div> <!-- row -->
                        <!-- list of reviews, max 10 -->
                        <!-- page numbers -->
                        <div class="container">
                            <ul class="pagination" >
                                <li class="disabled"><a href="#">«</a></li>
                                <li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>
                                <li><a href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#">5</a></li>
                                <li><a href="#">»</a></li>
                            </ul>
                        </div>
                    </div> <!-- panel body -->
                </div> <!-- panel -->

            </div> <!-- edit profile tab -->

            <br>
            <div class="tab-pane" id="preferences">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-12 lead">
                                Preferences
                                <button class="btn btn-primary pull-right" data-toggle="collapse" data-parent="#accordion-s" data-target="#collapseOne-s,#collapseTwo-s,#collapseThree-s">All</button>
                                <hr>
                            </div>
                        </div>
                        <!-- various topics of settings that expand -->
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-s" href="#collapseOne-s">
                                        Sharing
                                    </a>
                                </h4>
                            </div>
                            <div id="collapseOne-s" class="panel-collapse collapse">
                                <div class="panel-body">
                                    Automatically share reviews and ratings?
                                    <label class="switch pull-right">
                                        <input type="checkbox">
                                            <div class="slider round"></div>
                                    </label>

                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-s" href="#collapseTwo-s">
                                        Privacy settings
                                    </a>
                                </h4>
                            </div>
                            <div id="collapseTwo-s" class="panel-collapse collapse">
                                <div class="panel-body">
                                    Allow all users to search up and view profile?
                                    <label class="switch pull-right">
                                        <input type="checkbox">
                                            <div class="slider round"></div>
                                    </label>
                                    <hr>
                                    Allow all users to view personal lists?
                                    <label class="switch pull-right">
                                        <input type="checkbox">
                                            <div class="slider round"></div>
                                     </label>

                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-s" href="#collapseThree-s">
                                        Notifications
                                    </a>
                                </h4>
                            </div>
                            <div id="collapseThree-s" class="panel-collapse collapse">
                                <div class="panel-body">
                                    Receive emails for new friend requests?
                                    <label class="switch pull-right">
                                        <input type="checkbox">
                                            <div class="slider round"></div>
                                    </label>
                                    <hr>
                                    Receive emails when recommendations are given?
                                    <label class="switch pull-right">
                                        <input type="checkbox">
                                            <div class="slider round"></div>
                                    </label>

                                </div>
                            </div>
                        </div>
                    </div> <!-- panel body -->
                </div> <!-- panel -->
            </div> <!-- preferences tab -->

            <div class="tab-pane" id="friends">
                <div class="panel panel-default">
                    <div style="padding-right:2%; padding-top:2%"> <!-- move css -->
                        <button class="btn btn-primary pull-right" data-toggle="modal" data-target="#addFriends"><i class="glyphicon glyphicon-user"></i> Add friends</button>
                        <div id="addFriends" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header" style="padding-left:7%">
                                        <h2>Add Friends<a class="close" data-dismiss="modal">x</a></h2>
                                    </div>
                                    <div class="modal-body">
                                        <div class="panel panel-default">
                                            <div class="panel-heading c-list">
                                                <span class="title">Search</span>
                                                <ul class="pull-right c-controls">
                                                    <li><a href="#" class="hide-search" data-command="toggle-search" data-toggle="tooltip" data-placement="top" title="Toggle Search"><i class="fa fa-ellipsis-v"></i></a></li>
                                                </ul>
                                            </div>
                                            <div class="row" style="display: none;">
                                                <div class="col-xs-12">
                                                    <div class="input-group c-search">
                                                        <input type="text" class="form-control" id="contact-list-search">
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button"><span class="glyphicon glyphicon-search text-muted"></span></button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <ul class="list-group" id="contact-list">
                                                <li class="list-group-item">
                                                    <div class="col-xs-12 col-sm-3">
                                                        <img src="http://api.randomuser.me/portraits/men/49.jpg" alt="Scott Stevens" class="img-responsive img-circle" />
                                                    </div>
                                                    <div class="col-xs-12 col-sm-9">
                                                        <span class="name">Scott Stevens</span><br/>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="col-xs-12 col-sm-3">
                                                        <img src="http://api.randomuser.me/portraits/men/97.jpg" alt="Seth Frazier" class="img-responsive img-circle" />
                                                    </div>
                                                    <div class="col-xs-12 col-sm-9">
                                                        <span class="name">Seth Frazier</span><br/>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="col-xs-12 col-sm-3">
                                                        <img src="http://api.randomuser.me/portraits/women/90.jpg" alt="Jean Myers" class="img-responsive img-circle" />
                                                    </div>
                                                    <div class="col-xs-12 col-sm-9">
                                                        <span class="name">Jean Myers</span><br/>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </li>
                                                <li class="list-group-item">
                                                    <div class="col-xs-12 col-sm-3">
                                                        <img src="http://api.randomuser.me/portraits/men/24.jpg" alt="Todd Shelton" class="img-responsive img-circle" />
                                                    </div>
                                                    <div class="col-xs-12 col-sm-9">
                                                        <span class="name">Todd Shelton</span><br/>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </li>
                                            </ul>
                                        </div> <!-- contacts panel -->
                                    </div> <!-- modal body -->
                                </div> <!-- modal content -->
                            </div>
                        </div>
                    </div>
                    <br><br>
                    <div class="panel-body">
                        <ul class="list-group">
                            <li href="#" class="list-group-item text-left">
                                <img class="img-thumbnail" src="http://bootdey.com/img/Content/user_1.jpg">
                                <label class="name">James Rodriguez</label>
                                <label class="pull-right">
                                    <a class="btn btn-success btn-xs glyphicon glyphicon-ok" href="#" title="View"></a>
                                    <a class="btn btn-danger  btn-xs glyphicon glyphicon-trash" href="#" title="Delete"></a>
                                    <a class="btn btn-info  btn-xs glyphicon glyphicon glyphicon-comment" href="#" title="Send message"></a>
                                </label>
                                <div class="break"></div>
                            </li>
                            <li href="#" class="list-group-item text-left">
                                <img class="img-thumbnail" src="http://bootdey.com/img/Content/user_2.jpg">
                                <label class="name">Mariana pajon</label>
                                <label class="pull-right">
                                    <a class="btn btn-success btn-xs glyphicon glyphicon-ok" href="#" title="View"></a>
                                    <a class="btn btn-danger  btn-xs glyphicon glyphicon-trash" href="#" title="Delete"></a>
                                    <a class="btn btn-info  btn-xs glyphicon glyphicon glyphicon-comment" href="#" title="Send message"></a>
                                </label>
                                <div class="break"></div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div> <!-- friends tab -->

        </div> <!-- tab content -->
    </div> <!-- tabs -->

    <!-- to upload a new profile picture -->
    <script>
        $(function() {
            $("#upload-img").on("change", function() {
                var files = !!this.files ? this.files : [];
                if (!files.length || !window.FileReader) return; // no file selected, or no FileReader support

                if (/^image/.test( files[0].type)) { // only image file
                    var reader = new FileReader(); // instance of the FileReader
                    reader.readAsDataURL(files[0]); // read the local file
                    reader.onload = function(e) { // set image data as background of div
                        $("#img-preview-block").css({'background-image': 'url('+e.target.result +')', "background-size": "cover"});
                    }
                }
            });
        });
    </script>

    <!-- verifying retyped password when changing password is same -->
    <script>
        var password = document.getElementById("password"), confirm_password = document.getElementById("confirm_password");

        function validatePassword() {
            if(password.value != confirm_password.value) {
                confirm_password.setCustomValidity("Passwords do not match");
            } else {
                confirm_password.setCustomValidity('');
            }
        }

        password.onchange = validatePassword;
        confirm_password.onkeyup = validatePassword;
    </script>

    <!-- search bar for adding friends -->
    <!-- js search plugin -->
    <script src="//rawgithub.com/stidges/jquery-searchable/master/dist/jquery.searchable-1.0.0.min.js"></script>
    <script>
        $(function () {
            /* BOOTSNIPP FULLSCREEN FIX */
            if (window.location == window.parent.location) {
                $('#back-to-bootsnipp').removeClass('hide');
            }

            $('[data-toggle="tooltip"]').tooltip();

            $('#fullscreen').on('click', function(event) {
                event.preventDefault();
                window.parent.location = "http://bootsnipp.com/iframe/4l0k2";
            });
            $('a[href="#cant-do-all-the-work-for-you"]').on('click', function(event) {
                event.preventDefault();
                $('#cant-do-all-the-work-for-you').modal('show');
            })

            $('[data-command="toggle-search"]').on('click', function(event) {
                event.preventDefault();
                $(this).toggleClass('hide-search');

                if ($(this).hasClass('hide-search')) {
                    $('.c-search').closest('.row').slideUp(100);
                }else{
                    $('.c-search').closest('.row').slideDown(100);
                }
            })

            $('#contact-list').searchable({
                searchField: '#contact-list-search',
                selector: 'li',
                childSelector: '.col-xs-12',
                show: function( elem ) {
                    elem.slideDown(100);
                },
                hide: function( elem ) {
                    elem.slideUp( 100 );
                }
            })
        });
    </script>

{% endblock %}